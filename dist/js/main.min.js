/*! avgvst v0.0.3 | (c) 2020 Bulat | MIT License | https://github.com/BulatSa/avgvst */
/*! avgvst v0.0.3 | (c) 2020 Bulat | MIT License | https://github.com/BulatSa/avgvst */
function initFancy(){$(".fancy").fancybox({buttons:["close"]}),$(".fancy-modal").fancybox({selector:"",touch:!1}),$(".fancy-map").fancybox({toolbar:!1,smallBtn:!0,defaultType:"iframe"}),$(".fancy-video").fancybox({toolbar:!1,smallBtn:!0,youtube:{controls:1,showinfo:0,autoplay:1}})}$((function(){const e=$("input[type='tel']");if(e.length){String.prototype.replaceAt=function(e,t){return this.substr(0,e)+t+this.substr(e+t.length)};const t={onKeyPress:function(e,t,s,n){if("8"===e.charAt(1)){const e=s.get(0).value;s.get(0).value=e.replaceAt(1,"7")}}};e.mask("+0 (000) 000-00-00",t),e.on("focus",(function(){$(this).get(0).value.length<2&&($(this).get(0).value="+")})),e.on("blur",(function(){"+"===$(this).get(0).value&&($(this).get(0).value="")}))}})),$((function(){const e=document.querySelectorAll(".subscr-mini"),t=document.querySelectorAll("input[type=email]"),s=document.querySelectorAll("input.input-text"),n=e=>{const t=e.target.parentElement;"focus"===e.type&&""===e.target.value&&t.classList.add("active"),"blur"===e.type&&""===e.target.value&&(t.classList.remove("active"),t.classList.remove("error"))};s.forEach((e=>{e.addEventListener("focus",n),e.addEventListener("blur",n)}));const a=e=>{const t=e.target.querySelector("input[type=email]"),s=t.parentElement;t.validity.valid||(e.preventDefault(),s.classList.add("error"))},o=e=>{const t=e.target.parentElement;e.target.validity.valid&&t.classList.remove("error")};t.forEach((e=>{e.addEventListener("input",o)})),e.forEach((e=>{e.addEventListener("submit",a)}))})),$((function(){const e=/^((?!chrome|android).)*Macintosh/i.test(navigator.userAgent),t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);(e||t)&&$(".class").length&&$(".class").addClass("is-macos")})),$.fancybox.defaults.backFocus=!1,$.fancybox.defaults.autoFocus=!1,$.fancybox.defaults.lang="ru",$.fancybox.defaults.i18n={ru:{CLOSE:"Закрыть",NEXT:"Дальше",PREV:"Назад",ERROR:"Не удается загрузить. <br/> Попробуйте позднее.",PLAY_START:"Начать слайдшоу",PLAY_STOP:"Остановить слайдшоу",FULL_SCREEN:"На весь экран",THUMBS:"Превью"}},$((function(){initFancy()})),$((function(){$(".scrollto").length&&$(".scrollto").on("click",(function(){const e=$(this).attr("href"),t=$(e).offset().top;return $("html,body").stop().animate({scrollTop:t},1e3),!1}))})),$((function(){$(".anim").length&&$(".anim").waypoint((function(){$(this.element).toggleClass("animated")}),{offset:"85%"})})),$((function(){const e=document.querySelector("[data-menu-open]"),t=document.querySelector("[data-mobile-menu-open]"),s=document.querySelector("."+e.dataset.menuOpen),n=document.querySelector("."+t.dataset.mobileMenuOpen),a=document.querySelector("[data-search-open]"),o=document.querySelector("[data-search-close]"),c=document.querySelector("."+a.dataset.searchOpen),l=document.querySelector(".search-form input"),r=document.querySelector(".search-form span"),i=document.querySelector(".header-search__result-wrap"),d=document.querySelector(".header-search__result-list"),u=document.body,m="scroll-up",p="scroll-down";let v=0;const f=()=>{const e=window.pageYOffset;e<=0?u.classList.remove(m):(e>100&&e>v&&!u.classList.contains(p)?(u.classList.remove(m),u.classList.add(p)):(e<100||e<v-10&&u.classList.contains(p))&&(u.classList.remove(p),u.classList.add(m)),v=e)},L=()=>{u.classList.contains("scroll-lock")?u.classList.remove("scroll-lock"):u.classList.add("scroll-lock")};window.addEventListener("scroll",f);const y=e=>{null===e.target.closest(".header-page-menu")&&null===e.target.closest("[data-menu-open]")&&$()},h=()=>{document.removeEventListener("click",y)},g=()=>{window.removeEventListener("scroll",f)},$=t=>{s.classList.contains("open")&&(e.classList.remove("open"),s.classList.remove("open"),h(),window.addEventListener("scroll",f))};if(a){const e=e=>{e.preventDefault(),L(),c.classList.contains("open")?(c.classList.remove("open"),window.addEventListener("scroll",f),m()):(c.classList.add("open"),g())},t=()=>{""!==l.value?(i.classList.remove("empty"),i.classList.add("finded"),l.classList.add("active")):(i.classList.remove("finded"),i.classList.add("empty"),l.classList.remove("active"))},s=()=>{i.classList.remove("empty"),i.classList.remove("finded")},n=()=>{d.innerHTML=""},u=()=>{l.value="",l.classList.remove("active")},m=()=>{s(),n(),u()};a.addEventListener("click",e),o.addEventListener("click",e),l.addEventListener("input",t),r.addEventListener("click",m)}if(e){const t=t=>{t.preventDefault(),s.classList.contains("open")?(e.classList.remove("open"),s.classList.remove("open"),h(),window.addEventListener("scroll",f)):(e.classList.add("open"),s.classList.add("open"),document.addEventListener("click",y),g())};e.addEventListener("click",t)}if(t){const e=e=>{e.preventDefault(),L(),n.classList.contains("open")?(t.classList.remove("open"),n.classList.remove("open"),window.addEventListener("scroll",f)):(t.classList.add("open"),n.classList.add("open"),g())};t.addEventListener("click",e)}})),$((function(){const e=document.querySelectorAll(".header-mobile-menu .sub-link"),t=e=>{const t=e.target.parentElement,s=e.target,n=t.querySelector("ul");n.style.height=n.scrollHeight+"px",s.classList.toggle("open"),n.style.height=s.classList.contains("open")?n.scrollHeight+"px":0};e.forEach((e=>{e.addEventListener("click",t)}))})),$(document).ready((function(){const e=e=>{if(!e.id)return e.text;const t=e.element,s=t.dataset.flagsrc,n=t.dataset.title,a=t.dataset.descr;return $(`\n      <img src="${s}"/>\n      <span class="title">${n}</span>\n      <span class="descr">${a}</span>\n    `)};$(".select2-js--currency").select2({theme:"avgvst-currency",dropdownAutoWidth:!0,minimumResultsForSearch:1/0,templateResult:e,templateSelection:e})}));