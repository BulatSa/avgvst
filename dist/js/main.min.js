/*! avgvst v0.0.3 | (c) 2020 Bulat | MIT License | https://github.com/BulatSa/avgvst */
/*! avgvst v0.0.3 | (c) 2020 Bulat | MIT License | https://github.com/BulatSa/avgvst */
function initFancy(){$(".fancy").fancybox({buttons:["close"]}),$(".fancy-modal").fancybox({selector:"",touch:!1}),$(".fancy-map").fancybox({toolbar:!1,smallBtn:!0,defaultType:"iframe"}),$(".fancy-video").fancybox({toolbar:!1,smallBtn:!0,youtube:{controls:1,showinfo:0,autoplay:1}})}$((function(){const t=$("input[type='tel']");if(t.length){String.prototype.replaceAt=function(t,e){return this.substr(0,t)+e+this.substr(t+e.length)};const e={onKeyPress:function(t,e,n,s){if("8"===t.charAt(1)){const t=n.get(0).value;n.get(0).value=t.replaceAt(1,"7")}}};t.mask("+0 (000) 000-00-00",e),t.on("focus",(function(){$(this).get(0).value.length<2&&($(this).get(0).value="+")})),t.on("blur",(function(){"+"===$(this).get(0).value&&($(this).get(0).value="")}))}})),$((function(){const t=/^((?!chrome|android).)*Macintosh/i.test(navigator.userAgent),e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);(t||e)&&$(".class").length&&$(".class").addClass("is-macos")})),$.fancybox.defaults.backFocus=!1,$.fancybox.defaults.autoFocus=!1,$.fancybox.defaults.lang="ru",$.fancybox.defaults.i18n={ru:{CLOSE:"Закрыть",NEXT:"Дальше",PREV:"Назад",ERROR:"Не удается загрузить. <br/> Попробуйте позднее.",PLAY_START:"Начать слайдшоу",PLAY_STOP:"Остановить слайдшоу",FULL_SCREEN:"На весь экран",THUMBS:"Превью"}},$((function(){initFancy()})),$((function(){$(".scrollto").length&&$(".scrollto").on("click",(function(){const t=$(this).attr("href"),e=$(t).offset().top;return $("html,body").stop().animate({scrollTop:e},1e3),!1}))})),$((function(){$(".anim").length&&$(".anim").waypoint((function(){$(this.element).toggleClass("animated")}),{offset:"85%"})})),$((function(){const t=document.querySelector("[data-menu-open]"),e=document.querySelector("[data-mobile-menu-open]"),n=document.querySelector("."+t.dataset.menuOpen),s=document.querySelector("."+e.dataset.mobileMenuOpen),o=document.body,a="scroll-up",c="scroll-down";let l=0;const i=()=>{const t=window.pageYOffset;t<=0?o.classList.remove(a):(t>l&&!o.classList.contains(c)?(o.classList.remove(a),o.classList.add(c)):t<l&&o.classList.contains(c)&&(o.classList.remove(c),o.classList.add(a)),l=t)};window.addEventListener("scroll",i);const r=t=>{null===t.target.closest(".header-page-menu")&&null===t.target.closest("[data-menu-open]")&&m()},u=()=>{document.removeEventListener("click",r)},d=()=>{window.removeEventListener("scroll",i)},m=e=>{n.classList.contains("open")&&(t.classList.remove("open"),n.classList.remove("open"),u(),window.addEventListener("scroll",i))};if(t){const e=e=>{e.preventDefault(),n.classList.contains("open")?(t.classList.remove("open"),n.classList.remove("open"),u(),window.addEventListener("scroll",i)):(t.classList.add("open"),n.classList.add("open"),document.addEventListener("click",r),d())};t.addEventListener("click",e)}if(e){const t=t=>{t.preventDefault(),s.classList.contains("open")?(e.classList.remove("open"),s.classList.remove("open"),window.addEventListener("scroll",i)):(e.classList.add("open"),s.classList.add("open"),d())};e.addEventListener("click",t)}})),$((function(){const t=document.querySelectorAll(".header-mobile-menu .sub-link"),e=t=>{const e=t.target.parentElement,n=t.target,s=e.querySelector("ul");s.style.height=s.scrollHeight+"px",n.classList.toggle("open"),s.style.height=n.classList.contains("open")?s.scrollHeight+"px":0};t.forEach((t=>{t.addEventListener("click",e)}))})),$(document).ready((function(){const t=t=>{if(!t.id)return t.text;const e=t.element,n=e.dataset.flagsrc,s=e.dataset.title,o=e.dataset.descr;return $(`\n      <img src="${n}"/>\n      <span class="title">${s}</span>\n      <span class="descr">${o}</span>\n    `)};$(".select2-js--currency").select2({theme:"avgvst-currency",dropdownAutoWidth:!0,minimumResultsForSearch:1/0,templateResult:t,templateSelection:t})}));