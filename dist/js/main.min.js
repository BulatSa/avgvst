/*! avgvst v0.0.3 | (c) 2020 Bulat | MIT License | https://github.com/BulatSa/avgvst */
"use strict";
/*! avgvst v0.0.3 | (c) 2020 Bulat | MIT License | https://github.com/BulatSa/avgvst */function initFancy(){$(".fancy").fancybox({buttons:["close"]}),$(".fancy-modal").fancybox({selector:"",touch:!1}),$(".fancy-map").fancybox({toolbar:!1,smallBtn:!0,defaultType:"iframe"}),$(".fancy-video").fancybox({toolbar:!1,smallBtn:!0,youtube:{controls:1,showinfo:0,autoplay:1}})}$((function(){var e=$("input[type='tel']");if(e.length){String.prototype.replaceAt=function(e,t){return this.substr(0,e)+t+this.substr(e+t.length)};e.mask("+0 (000) 000-00-00",{onKeyPress:function(e,t,n,o){if("8"===e.charAt(1)){var s=n.get(0).value;n.get(0).value=s.replaceAt(1,"7")}}}),e.on("focus",(function(){$(this).get(0).value.length<2&&($(this).get(0).value="+")})),e.on("blur",(function(){"+"===$(this).get(0).value&&($(this).get(0).value="")}))}})),$((function(){var e=/^((?!chrome|android).)*Macintosh/i.test(navigator.userAgent),t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);(e||t)&&$(".class").length&&$(".class").addClass("is-macos")})),$.fancybox.defaults.backFocus=!1,$.fancybox.defaults.autoFocus=!1,$.fancybox.defaults.lang="ru",$.fancybox.defaults.i18n={ru:{CLOSE:"Закрыть",NEXT:"Дальше",PREV:"Назад",ERROR:"Не удается загрузить. <br/> Попробуйте позднее.",PLAY_START:"Начать слайдшоу",PLAY_STOP:"Остановить слайдшоу",FULL_SCREEN:"На весь экран",THUMBS:"Превью"}},$((function(){initFancy()})),$((function(){$(".scrollto").length&&$(".scrollto").on("click",(function(){var e=$(this).attr("href"),t=$(e).offset().top;return $("html,body").stop().animate({scrollTop:t},1e3),!1}))})),$((function(){$(".anim").length&&$(".anim").waypoint((function(){$(this.element).toggleClass("animated")}),{offset:"85%"})})),$((function(){var e=document.querySelector("[data-menu-open]"),t=document.querySelector("[data-mobile-menu-open]"),n=document.querySelector(".".concat(e.dataset.menuOpen)),o=document.querySelector(".".concat(t.dataset.mobileMenuOpen)),s=document.body,a="scroll-up",c="scroll-down",i=0,l=function(){var e=window.pageYOffset;e<=0?s.classList.remove(a):(e>i&&!s.classList.contains(c)?(s.classList.remove(a),s.classList.add(c)):e<i&&s.classList.contains(c)&&(s.classList.remove(c),s.classList.add(a)),i=e)};window.addEventListener("scroll",l);var r=function(e){null===e.target.closest(".header-page-menu")&&null===e.target.closest("[data-menu-open]")&&f()},u=function(){document.removeEventListener("click",r)},d=function(){window.removeEventListener("scroll",l)},f=function(t){n.classList.contains("open")&&(e.classList.remove("open"),n.classList.remove("open"),u(),window.addEventListener("scroll",l))};if(e){e.addEventListener("click",(function(t){t.preventDefault(),n.classList.contains("open")?(e.classList.remove("open"),n.classList.remove("open"),u(),window.addEventListener("scroll",l)):(e.classList.add("open"),n.classList.add("open"),document.addEventListener("click",r),d())}))}if(t){t.addEventListener("click",(function(e){e.preventDefault(),o.classList.contains("open")?(t.classList.remove("open"),o.classList.remove("open"),window.addEventListener("scroll",l)):(t.classList.add("open"),o.classList.add("open"),d())}))}})),$((function(){var e=document.querySelectorAll(".header-mobile-menu .sub-link"),t=function(e){var t=e.target.parentElement,n=e.target,o=t.querySelector("ul");o.style.height=o.scrollHeight+"px",n.classList.toggle("open"),o.style.height=n.classList.contains("open")?o.scrollHeight+"px":0};e.forEach((function(e){e.addEventListener("click",t)}))}));